From 20bb072d7060e99b3c329ad5b5f9b5f0687b3fb9 Mon Sep 17 00:00:00 2001
From: johnlu <chengjun.lu@intel.com>
Date: Thu, 21 Jan 2021 00:35:21 +0800
Subject: [PATCH 08/14] Fix issue on the tensorexpr fuser when running profile
 JIT executor

---
 torch/csrc/jit/passes/tensorexpr_fuser.cpp | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/torch/csrc/jit/passes/tensorexpr_fuser.cpp b/torch/csrc/jit/passes/tensorexpr_fuser.cpp
index 76711c76c7..dc618f4c73 100644
--- a/torch/csrc/jit/passes/tensorexpr_fuser.cpp
+++ b/torch/csrc/jit/passes/tensorexpr_fuser.cpp
@@ -696,6 +696,8 @@ class TensorExprFuser {
       return canFuseOnCPU();
     } else if (device->is_cuda()) {
       return canFuseOnGPU();
+    } else if (device->is_xpu()) {
+      return false;
     }
     throw std::runtime_error("Unknown device");
   }
-- 
2.25.1

